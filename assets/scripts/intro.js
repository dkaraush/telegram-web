function startIntro(){function F(){$addclass($("#intro"),"hidden");$t(200,function(){$("#intro").style.display="none"})}function G(a){$(".inputSelect.country input").value=m[a].name;$addclass($(".inputSelect.country"),"typed");$addclass($(".input.phone"),"typed");$(".input.phone input").value=m[a].phoneCode+" ";$(".input.phone input").focus();y()}function t(a){var b=$("#intro"),c=$("#"+b.className||"login");$t(5,function(){b.className=a});$("#"+a).style.display="block";$t(200,function(){c.style.display=
"none"});"c-password"==a&&g.close();0<=["c-phone-code","c-password"].indexOf(a)?(g.start(),$("#c-code").style.display="block"):0<=["c-phone-code","c-password"].indexOf(c.id)&&(g.stop(),$t(200,function(){$("#c-code").style.display="none"}));"c-phone-code"==a&&$("#c-phone-code .input input").focus()}function H(){function a(e,d){$rmclass($("#c-login button"),"loading");if(e)t("c-phone-code"),$("#c-phone-code .input input").value="",$("#c-phone-code h1 span").innerText=b,z=d.phone_code_hash,console.log(d);
else{if("PHONE_NUMBER_INVALID"==d.error_message)$run($("#c-login .input.phone"),"Error",{text:"Invalid Phone Number"});else if("AUTH_RESTART"==d.error_message)$addclass($("#c-login button"),"loading"),proto.sendAPIMethod("auth.sendCode",c,a);else if("PHONE_MIGRATE_"==d.error_message.slice(0,14)){$addclass($("#c-login button"),"loading");var f=parseInt(d.error_message.slice(14));proto.auth_key=null;Storage.set("DC",f);proto.DC=f;proto.socket.close();proto.connected=!1;proto.connect();proto.sendAPIMethod("auth.sendCode",
c,a)}else if("FLOOD_WAIT_"==d.error_message.slice(0,11)){f=parseInt(d.error_message.slice(11));var h=~~(f/60);f%=60;10>f&&(f="0"+f);10>h&&(h="0"+h);$("#c-login .errorText").innerText="Flood warning: Wait "+h+"m:"+f+"s.";$("#c-login .errorText").style.opacity=.7;u=Date.now();$t(5E3,function(){4500<Date.now()-u&&($("#c-login .errorText").style.opacity=0)})}else"PHONE_NUMBER_FLOOD"==d.error_message&&($("#c-login .errorText").innerText="Flood Warning",$("#c-login .errorText").style.opacity=.7,u=Date.now(),
$t(5E3,function(){4500<Date.now()-u&&($("#c-login .errorText").style.opacity=0)}));console.warn(d)}}if(I()&&!$hasclass($("#c-login button"),"loading")){$addclass($("#c-login button"),"loading");var b=v="+"+$("#c-login .input.phone input").value.replace(/[^\d]/g,""),c={settings:{_:"codeSettings",flags:0},api_id:API_ID,api_hash:API_HASH,phone_number:v};proto.sendAPIMethod("auth.sendCode",c,a)}}function I(){$("#c-login .input.phone input").value.replace(/[^\d]/g,"");return"undefined"!==typeof proto&&
proto.connected}function y(){I()?$addclass($("#c-login button"),"ready"):$rmclass($("#c-login button"),"ready")}function O(){A=!1;$addclass($("#c-password button"),"loading");proto.sendAPIMethod("account.getPassword",{},function(a,b){a?(console.log("account.getPassword = ",b),"passwordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow"==b.new_algo._?(C=b.new_algo.salt1,D=b.new_algo.salt2,p=b.new_algo.g,k=b.new_algo.p,w=b.srp_B,J=b.srp_id,K=l(concat(k,int32(p))),$rmclass($("#c-password button"),
"loading"),$("#c-password .input .placeholder").innerText="Password",A=!0):console.warn("new_algo wrong predicate")):console.warn("wtf, account.getPassword error")})}function l(a){console.log("H("+S(a)+")");return B(sha256(a))}function L(a){console.log("H2("+S(a)+")");return B(sha256(a))}function E(a,b){console.log("SH("+S(a)+","+S(b)+")");return l(concat(b,a,b))}function P(a,b,c){console.log("PH1("+S(a)+","+S(b)+","+S(c)+")");return E(E(a,b),c)}function Q(a,b,c,e){R(P(a,b,c),b,1E5,function(a){e(E(a,
c))})}function R(a,b,c,e){window.crypto.subtle.importKey("raw",a,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]).then(function(a){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:b,iterations:c,hash:"SHA-256"},a,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}).then(function(a){return window.crypto.subtle.exportKey("raw",a)}).then(e)}$("#intro").style.display="block";$t(16,function(){$rmclass($("#intro"),"hidden")});var n,g,m=[];$onload(function(){function a(a){return function(b){b.style.backgroundPosition=
-28*a+"px 0"}}var b=$("#intro .inputSelect.country"),c=b.querySelector(".select div");load("assets/numbers.txt",function(f,d){if(f)for(var e=d.split("\n"),q=0;q<e.length;++q){var h=e[q].split(";");if(!(3>h.length)){var k="+"+h[0],g=h[1],l=h[2];h=parseInt(h[4]);m.push({phoneCode:k,code:g,name:l,len:h});c.appendChild($new("div#c"+q,null,[$new("span.flag",null,[],a(q)),$new("span.label",null,[$new("span",null,[$new("span.country",l),$new("span.code",k)])])],UI.addRipple,$click(function(a){for(a=a.target;"c"!=
a.id[0]&&"undefined"!==typeof a;)a=a.parentElement;a=a.id.slice(1);G(a);$run(b,"Close")})))}}});n=Class.extend({constructor:function(a){this.container=a||$("#monkey");this._active=0;var b=this;this.data=[];this.anims=[];this.loaded=!1;this._status=this.status="idle";this.trackFrom=this.trackTo=0;this.updating=!1;loadAll(map(n.animationNames,function(a){return n.src.replace(/\{animationName\}/g,a)}),function(a){for(var c=0;c<a.length;++c){var f=JSON.parse(a[c]);b.data[c]=f;b.anims[c]=bodymovin.loadAnimation(b.options(c));
b.anims[c].renderer.svgElement.style.display=b._active==c?"block":"none"}b.loaded=!0})},set:function(a){this.loaded&&(this.anims[this._active].pause(),this.anims[this._active].renderer.svgElement.style.display="none",this.anims[a].renderer.svgElement.style.display="block",this.anims[a].play());this._active=a},track:function(a){this.status="tracking";this.trackTo=20+140*Math.min(Math.max(a,0),1)},idle:function(a){"tracking"==this.status&&(this.trackTo=0);this.status="idle"},close:function(a){"tracking"==
this.status&&(this.trackTo=0);this.status="closed"},peek:function(a){"tracking"==this.status&&(this.trackTo=0);this.status="peek"},options:function(a){return{container:this.container,renderer:"svg",loop:!0,autoplay:a==this._active,animationData:this.data[a]}},id:function(){},update:function(){this.updating&&(requestAnimationFrame(this.update.bind(this)),this.status!=this._status&&("idle"===this._status?3>~~this.anims[0].currentFrame?"tracking"==this.status?(this.set(1),this.anims[0].setDirection(1),
this.anims[1].stop(),this._status="tracking",this.trackFrom=0):"closed"===this.status&&(this.set(2),this.anims[2].goToAndPlay(0),this.anims[2].loop=!1,this._status=this.status):90>this.anims[0].currentFrame&&this.anims[0].setDirection(-1):"tracking"===this._status?1>this.trackFrom&&("idle"===this.status?(this.set(0),this._status=this.status):"closed"===this.status?(this.set(2),this.anims[2].goToAndPlay(0),this.anims[2].loop=!1,this._status=this.status):"closed"===this.status&&(this.set(2),this.anims[2].goToAndPlay(0),
this.anims[2].loop=!1,this._status=this.status)):"closed"===this._status?"peek"===this.status&&49<=this.anims[2].currentFrame&&(this.set(3),this.anims[3].goToAndPlay(0),this.anims[3].loop=!1,this._status=this.status):"peek"===this._status&&"closed"===this.status&&(32<=this.anims[3].currentFrame?(this.set(2),this.anims[2].pause(),this._status=this.status):this.anims[3].play())),"closed"==this.status&&this._status==this.status&&49<=this.anims[2].currentFrame&&this.anims[2].pause(),"peek"==this.status&&
this._status==this.status&&16.5<=this.anims[3].currentFrame&&this.anims[3].pause(),"tracking"==this._status&&(this.trackFrom+=.1*(this.trackTo-this.trackFrom),this.anims[1].renderer.renderFrame(this.trackFrom)))},start:function(){this.updating||(this.updating=!0,this.update())},stop:function(){this.updating=!1}});n.animationNames=["MonkeyIdle","MonkeyTracking","MonkeyClose","MonkeyPeek"];n.src="assets/animations/{animationName}.json";g=new n;var e=$("#intro"),d=$(".input.phonecode input");$(".input.password input");
$ev(d,"focus change keyup keypress mousedown mouseup".split(" "),function(){$hasclass(e,"c-phone-code")&&g.track(d.selectionStart/20)});$ev(d,["blur"],function(){$hasclass(e,"c-phone-code")&&g.idle()});proto.sendAPIMethod("help.getNearestDc",{},function(a,b){if(a){for(var c=b.country,d=0;d<m.length;++d)if(m[d].code==c){G(d);break}}})});$ev($(".input.phone input"),["change","keyup"],function(){y();for(var a=$(".input.phone input").value.replace(/[^\d]/g,""),b=[],c=0;c<a.length;++c)for(var e=
"+"+a.substring(0,a.length-c),d=0;d<m.length;++d)m[d].phoneCode==e&&b.push(m[d]);if(1<=b.length){a=$(".inputSelect.country input").value;for(d=0;d<b.length;++d)if(a==b[d].name)return;$(".inputSelect.country input").value=b[0].name;$addclass($(".inputSelect.country"),"typed")}});var v=null,z=null,u=null;$ev(window,"keypress",function(a){13==a.keyCode&&$hasclass($("#intro"),"c-login")&&H()});$click(H)($("#c-login button"));$click(function(){t("c-login")})($("#c-phone-code .edit"));var r={};$ev($("#c-phone-code .input.phonecode input"),
["change","keypress","keyup"],function(){var a=$("#c-phone-code .input.phonecode input").value.trim();"undefined"===typeof r[a]||r[a]||$run($("#c-phone-code .input"),"Error",{text:"Code"});5==a.length&&"undefined"===typeof r[a]&&(r[a]=!0,proto.sendAPIMethod("auth.signIn",{phone_number:v,phone_code:a,phone_code_hash:z},function(b,c){b?"auth.authorizationSignUpRequired"==c._?t("c-register"):"auth.authorization"==c._?(window.auth={key:S64(proto.auth_key),user:c.user},Storage.set("auth",auth),F(),startApp()):
console.log(c):("PHONE_CODE_INVALID"==c.error_message?($run($("#c-phone-code .input"),"Error",{text:"Code"}),r[a]=!1):"SESSION_PASSWORD_NEEDED"==c.error_message&&(t("c-password"),O()),console.log("err:",c))}))});$click(function(){var a=$("#c-register .input.name input").value,b=$("#c-register .input.last input").value;proto.sendAPIMethod("auth.signUp",{phone_number:v,phone_code_hash:z,first_name:a,last_name:b},function(a,b){a?"auth.authorization"==b._&&(window.auth={key:S64(proto.auth_key),user:b.user},
Storage.set("auth",auth),F(),startApp()):console.warn(b)})})($("#c-register button"));y();var x=$("#c-password .input.password");$click(function(){var a=x.querySelector("input"),b=$hasclass(x,"visible");$setclass(x,"visible",!b);a.type=b?"password":"text";g[b?"close":"peek"]()})(x.querySelector(".button"));var C,D,p,k,w,J,M,N,K,A=!1;$click(function(){if(A){var a=$("#c-password .input input").value;a="undefined"!==typeof TextEncoder?(new TextEncoder).encode(a):Braw(a);Q(a,C,D,function(a){console.log("x ["+
a.byteLength+"] "+S(a," "));var b=bigInt(S(a),16);console.log("x = "+b.toString(10));var e=bigInt(S(k),16);console.log("p = "+e.toString(10));M=bigInt(p).modPow(b,e);N=bigInt(S(K),16).multiply(M).mod(e);a=randomBytes(256);console.log("A ["+a.byteLength+"] "+S(a," "));var d=bigInt(S(a),16);console.log("a = "+d.toString(10));var f=bigInt(p).modPow(d,e);console.log("g_a = "+f.toString(10));var h=l(concat(B(f.toString(16),k.byteLength),w));h=bigInt(S(h),16);console.log("u = "+h.toString(10));var g=bigInt(S(w),
16);console.log("g_b = "+g.toString(10));g=g.minus(N).mod(e);g.isNegative()&&(g=g.plus(e));console.log("t = "+g.toString(10));b=g.modPow(d.plus(h.multiply(b)),e);b=l(B(b.toString(16)));console.log("k_a ["+b.byteLength+"] "+S(b," "));f=concat(xor(l(k),l(int32(p))),L(C),L(D),B(f.toString(16),k.byteLength),B(w.toString(16),k.byteLength),B(b.toString(16),k.byteLength));b=l(f);console.log("m1cont ["+f.byteLength+"] "+S(f));console.log("m1 ["+b.byteLength+"] "+S(b));proto.sendAPIMethod("auth.checkPassword",
{password:{_:"inputCheckPasswordSRP",srp_id:J,A:a,M1:b}},function(a,b){console.log(a,b)})})}})($("#c-password button"))};